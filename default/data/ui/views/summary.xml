<form theme="dark">
  <label>Summary</label>
  <fieldset submitButton="false">
    <input type="dropdown" token="selectedSession" searchWhenChanged="true">
      <label>Session</label>
      <fieldForLabel>source</fieldForLabel>
      <fieldForValue>source</fieldForValue>
      <search>
        <query>| tstats c where index=* sourcetype=poker:summary by source</query>
        <earliest>-7d@h</earliest>
        <latest>now</latest>
      </search>
    </input>
  </fieldset>
  <row>
    <panel>
      <title>Results</title>
      <table>
        <search>
          <query>host="data-ninja.com" index="main" sourcetype="poker:summary" earliest=-4d source=$selectedSession$ 
| eval amount=coalesce(stack,addon), action=if(action="created","participation",action) 
| chart sum(amount) over player by action 
| table player quits addon participation 
| eval addon=if(isnull(addon),"0",addon) 
| fillnull value="0" 
| eval total=(quits-addon-participation)/100 

| table player total
| sort - total</query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="refresh.display">progressbar</option>
      </table>
    </panel>
    <panel>
      <title>Tikkies</title>
      <table>
        <search>
          <query>| makeresults | eval text="0 {'Jardinero': ['Castor', 6.61]}
1 {'Odi': ['Castor', 1]}
2 {'Rogier': ['Castor', 4.14]}
3 {'Rogier': ['Jeroen', 2.43]}
4 {'Rogier': ['Makkie', 5.58]}
5 {'Rogier': ['PATRICK', 13.63]}
6 {'Ruben': ['PATRICK', 8.82]}"
| rex max_match=100 field=text "\d\s\{\'(?&lt;winner&gt;[^\']+)\'\:\s\[\'(?&lt;loser&gt;[^\']+)\'\,\s(?&lt;amount&gt;[^\]]+)\]\}"
| fields - _time text
| eval n=mvzip(mvzip(winner,loser,"|"),amount,"|")
| fields n
| mvexpand n
| eval n=split(n, "|")
| eval winner=mvindex(n,0), loser=mvindex(n,1), amount=mvindex(n,2)
| fields - n
| eval tikkies = winner . " mag een tikkie van: " . amount . " sturen naar: " . loser
| fields tikkies</query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
        </search>
        <option name="drilldown">none</option>
      </table>
    </panel>
  </row>
  <row>
    <panel>
      <title>Summary</title>
      <table>
        <search>
          <query>host="data-ninja.com" index="main" sourcetype="poker:summary" earliest=-4d source=$selectedSession$
| eval amount=coalesce(stack,addon), action=if(action="created","participation",action) 
| chart sum(amount) over player by action 
| table player quits addon participation 
| eval addon=if(isnull(addon),"0",addon)
| fillnull value="0" 
| eval total=(quits-addon-participation)/100 
| append 
    [ search host="data-ninja.com" index="main" sourcetype="poker:summary" source=$selectedSession$
    | stats latest(stack) as stack by player 
    | eval out=stack/100 
    | fields player out] 
| stats values(*) as * by player
| table player total out *
| sort - total</query>
          <earliest>-7d@h</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="count">20</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">none</option>
        <option name="percentagesRow">false</option>
        <option name="refresh.display">progressbar</option>
        <option name="rowNumbers">false</option>
        <option name="totalsRow">false</option>
        <option name="wrap">true</option>
      </table>
    </panel>
  </row>
</form>